var tempOrderId='',cartCount=0,sumofcart=0,selectedProdutId='',isBuyNow=false;(function(){var location=window.localStorage.getItem("locality");if(location){$('#spoc').val(location);}
$('.openVideo').on('click',function(e){$('.bgProductOverlay').fadeIn();$('.videoModal').addClass('open')
$('body').addClass('overflow-h');e.stopPropagation();});$('.bgProductOverlay, .closeIcon').on('click',function(e){$('.checkOutModal, .videoModal').removeClass('open');$('.bgProductOverlay').fadeOut();$('body').removeClass('overflow-h');e.stopPropagation();});})($);function showCartAlert(){$('.checkOutModal').addClass('open');}
function hideCartAlert(){$('.checkOutModal').removeClass('open');$('.bgProductOverlay').fadeOut();$('body').removeClass('overflow-h');}
function addToCart(productId,buyNow){var quantity=$('#product_'+productId).find('.quantitySelector').val();console.log(productId,parseFloat(quantity));if($('#spoc').val().length>0){if($('#spoc').val()!='na'){updateQty(parseFloat(quantity),productId,buyNow);}else{showCustomAlert('Please enter locality within range..!')}}else{selectedProdutId=productId;isBuyNow=buyNow;if($(window).width()<=mobileWidth){$('.bgOverlay').fadeIn();$('.bottomModal').addClass('open');$('body').addClass('overflow-h');}else{$('.locationCon').trigger('click');$('html, body').animate({scrollTop:0})}}}
function gotoCheckout(){window.location.href="/checkout";}
function updateQty(add,product_code,buyNow){showLoader();var params="&product_code="+product_code+"&qty="+add;selectedProdutId='';isBuyNow=false;if(tempOrderId){params+="&temp_order_id="+tempOrderId;}else{var temp=window.localStorage.getItem("tempOrderId");if(temp!=''&&temp!=null){tempOrderId=temp;params+="&temp_order_id="+tempOrderId;}}
$.ajax({type:"GET",url:apiPath+"?cartmethod=1"+params,success:function(response){hideLoader();if(response.result=='success'){tempOrderId=response.temp_order_id;cartCount=response.cart_count;cartTotal=response.sumofcart;$('.cart-number').text(cartCount).addClass('cartCount');window.localStorage.setItem("tempOrderId",tempOrderId);if(buyNow){gotoCheckout();}else{var cartText=cartCount+' item'+(cartCount==1?'':'s');$('.cart-text').text(cartText);showCartAlert();}}},error:function(err){console.log('Add to cart fail',err);hideLoader();}});}